<div class="profile-container">
  <div class="profile-header">
    <h1>My Profile</h1>
    <button class="edit-btn" (click)="toggleEdit()">
      <span class="material-icons">{{ isEditing ? 'close' : 'edit' }}</span>
      {{ isEditing ? 'Cancel' : 'Edit Profile' }}
    </button>
  </div>

  @if (currentUser(); as user) {
    <div class="profile-card">
      <div class="avatar-section">
        <div class="avatar-large">
          {{ user.firstName.charAt(0) }}{{ user.lastName.charAt(0) }}
        </div>
      </div>

      @if (!isEditing) {
        <div class="profile-info">
          <div class="info-item">
            <label>First Name</label>
            <p>{{ user.firstName }}</p>
          </div>
          <div class="info-item">
            <label>Last Name</label>
            <p>{{ user.lastName }}</p>
          </div>
          <div class="info-item">
            <label>Email</label>
            <p>{{ user.email }}</p>
          </div>
          <div class="info-item">
            <label>Role</label>
            <p>{{ getRoleDisplay() }}</p>
          </div>
          <div class="info-item">
            <label>Status</label>
            <p class="status-active">Active</p>
          </div>
        </div>
      } @else {
        <form class="profile-edit-form">
          <div class="form-group">
            <label>First Name</label>
            <input type="text" [(ngModel)]="editForm.firstName" name="firstName" class="form-input">
          </div>
          <div class="form-group">
            <label>Last Name</label>
            <input type="text" [(ngModel)]="editForm.lastName" name="lastName" class="form-input">
          </div>
          <div class="form-group">
            <label>Email</label>
            <input type="email" [(ngModel)]="editForm.email" name="email" class="form-input">
          </div>
          <button type="button" class="save-btn" (click)="saveChanges()">
            <span class="material-icons">save</span>
            Save Changes
          </button>
        </form>
      }
    </div>
  }
</div>
